"use strict";const productSlides=document.querySelectorAll(".slider-products__item"),buttonPrev=document.querySelector(".slider-products__button--prev"),buttonNext=document.querySelector(".slider-products__button--next"),radioControls=document.querySelectorAll(".slider-products__control-input"),servicesControls=document.querySelectorAll(".slider-services__control"),servicesSlides=document.querySelectorAll(".slider-services__slide"),mapPopup=document.querySelector(".map-popup"),openMapElement=document.querySelector(".contacts__map-image"),closeMapElement=document.querySelector(".map-popup__close"),feedbackPopup=document.querySelector(".feedback-popup"),feedbackForm=document.querySelector(".feedback-popup__form"),feedbackOpenElement=document.querySelector(".button--contacts"),feedbackCloseElement=document.querySelector(".feedback-popup__close"),feedbackLogin=document.querySelector("#customer-name"),feedbackEmail=document.querySelector("#customer-email"),cartLink=document.querySelector(".checkout-block__link--cart"),buyButtons=document.querySelectorAll(".button--buy"),bookmarksLink=document.querySelector(".checkout-block__link--bookmarks"),bookmarkButtons=document.querySelectorAll(".button--bookmark"),cartPopup=document.querySelector(".cart-popup"),cartPopupCloseElement=document.querySelector(".cart-popup__close"),cartPopupContinue=document.querySelector(".button--white"),showCurrentSlide=()=>{for(let e of productSlides)e.classList.remove(productClassName);productSlides[currentSlide].classList.add(productClassName)},refreshControls=()=>{for(let e of radioControls)e.checked=!1;radioControls[currentSlide].checked=!0},resetSlider=()=>{for(let e of servicesControls)e.classList.remove(activeControlClassName);for(let t of servicesSlides)t.classList.remove(activeSlideClassName)},setClasses=e=>{servicesControls[e].classList.add(activeControlClassName),servicesSlides[e].classList.add(activeSlideClassName)};buttonPrev&&buttonPrev.addEventListener("click",e=>{e.preventDefault(),currentSlide=Math.abs(currentSlide-1)%productSlides.length,refreshControls(),showCurrentSlide()}),buttonNext&&buttonNext.addEventListener("click",e=>{e.preventDefault(),currentSlide=(currentSlide+1)%productSlides.length,refreshControls(),showCurrentSlide()}),radioControls.forEach((e,t)=>{e.addEventListener("click",()=>{currentSlide=t,refreshControls(),showCurrentSlide()})});const productClassName="slider-products__item--active",activeControlClassName="slider-services__control--active",activeSlideClassName="slider-services__slide--active";let currentSlide=0;productSlides[0]&&productSlides[0].classList.add(productClassName),servicesControls[0]&&servicesControls[0].classList.add(activeControlClassName),servicesSlides[0]&&servicesSlides[0].classList.add(activeSlideClassName),servicesControls.forEach((e,t)=>{e.addEventListener("click",e=>{e.preventDefault(),resetSlider(),setClasses(t)})});const mapPopupOpen=e=>{e.preventDefault(),mapPopup.classList.add("map-popup--show")},mapPopupClose=e=>{e.preventDefault(),mapPopup.classList.remove("map-popup--show")};openMapElement&&openMapElement.addEventListener("click",mapPopupOpen),closeMapElement&&closeMapElement.addEventListener("click",mapPopupClose),window.addEventListener("keydown",function(e){27===e.keyCode&&(mapPopup.classList.contains("map-popup--show")||feedbackPopup.classList.contains("feedback-popup--show")||cartPopup.classList.contains("cart-popup--show"))&&(mapPopupClose(e),feedbackPopupClose(e),cartPopupClose(e))});let isStorageSupport=!0,storage="";try{storage=localStorage.getItem("login")}catch(e){isStorageSupport=!1}const feedbackPopupOpen=e=>{e.preventDefault(),feedbackPopup.classList.add("feedback-popup--show"),storage?(feedbackLogin.value=storage,feedbackEmail.focus()):feedbackLogin.focus()},feedbackPopupClose=e=>{e.preventDefault(),feedbackPopup.classList.remove("feedback-popup--show"),feedbackPopup.classList.remove("feedback-popup--error")};feedbackOpenElement&&feedbackOpenElement.addEventListener("click",feedbackPopupOpen),feedbackCloseElement&&feedbackCloseElement.addEventListener("click",feedbackPopupClose),feedbackForm.addEventListener("submit",e=>{feedbackLogin.value&&feedbackEmail.value?isStorageSupport&&localStorage.setItem("login",feedbackLogin.value):(e.preventDefault(),feedbackPopup.classList.remove("feedback-popup--error"),feedbackForm.offsetWidth,feedbackForm.offsetWidth,feedbackPopup.classList.add("feedback-popup--error"))});const cartPopupOpen=e=>{e.preventDefault(),cartPopup.classList.add("cart-popup--show")},cartPopupClose=e=>{e.preventDefault(),cartPopup.classList.remove("cart-popup--show")};buyButtons.forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),cartLink.classList.add("checkout-block__link--active"),cartPopupOpen(e)})}),bookmarkButtons.forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),bookmarksLink.classList.add("checkout-block__link--active")})}),cartPopupCloseElement.addEventListener("click",cartPopupClose),cartPopupContinue.addEventListener("click",cartPopupClose);